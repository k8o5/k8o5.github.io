<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>BRUT - Vanity Force</title>

    <!-- FAVICON: Sharp Fractured Shard (AAA Style) -->
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cdefs%3E%3ClinearGradient id='shard' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' stop-color='%23f3e8ff'/%3E%3Cstop offset='100%25' stop-color='%23a855f7'/%3E%3C/linearGradient%3E%3Cfilter id='glow'%3E%3CfeGaussianBlur stdDeviation='1.5' result='coloredBlur'/%3E%3CfeMerge%3E%3CfeMergeNode in='coloredBlur'/%3E%3CfeMergeNode in='SourceGraphic'/%3E%3C/feMerge%3E%3C/filter%3E%3C/defs%3E%3Cpath d='M40 5 L60 5 L85 40 L50 95 L15 40 Z' fill='none' stroke='url(%23shard)' stroke-width='4' filter='url(%23glow)'/%3E%3Cpath d='M40 5 L50 95 M15 40 L85 40 M60 5 L50 50' stroke='url(%23shard)' stroke-width='1' opacity='0.5'/%3E%3Cpath d='M40 15 L60 15 L75 40 L50 80 L25 40 Z' fill='url(%23shard)' opacity='0.15'/%3E%3C/svg%3E" type="image/svg+xml">

    <!-- LIBRARIES -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@solana/web3.js@1.98.0/lib/index.iife.min.js"></script>
    <script src="https://unpkg.com/bs58@5.0.0/index.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;500;700&display=swap" rel="stylesheet">

    <style>
        :root { --bg: #05020a; --card: #140824; --accent: #d8b4fe; }
        body { font-family: 'Space Grotesk', sans-serif; background: var(--bg); color: #e2e8f0; height: 100vh; overflow-y: auto; touch-action: manipulation; }
        .glass { background: rgba(20, 8, 36, 0.9); backdrop-filter: blur(12px); border: 1px solid rgba(255,255,255,0.08); }
        .btn-brand { background: linear-gradient(135deg, #e9d5ff 0%, #a855f7 100%); color: #1e1b4b; }
        .btn-brand:active { transform: scale(0.96); }
        .code-font { font-family: 'Courier New', monospace; letter-spacing: -0.5px; }
        .spinner { border: 3px solid rgba(255,255,255,0.1); border-top-color: #d8b4fe; border-radius: 50%; animation: spin 0.8s linear infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }
        .fade-in { animation: fade 0.4s ease-out; }
        @keyframes fade { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .shake { animation: shake 0.4s cubic-bezier(.36,.07,.19,.97) both; }
        @keyframes shake { 10%, 90% { transform: translate3d(-1px, 0, 0); } 20%, 80% { transform: translate3d(2px, 0, 0); } 30%, 50%, 70% { transform: translate3d(-4px, 0, 0); } 40%, 60% { transform: translate3d(4px, 0, 0); } }
    </style>
</head>
<body class="flex flex-col items-center py-6 px-4">

<!-- Navbar -->
<nav class="w-full max-w-lg flex justify-between items-center mb-8">
    <div class="flex items-center gap-3">
        <!-- New Sharp Logo SVG -->
        <svg class="w-10 h-10 drop-shadow-lg" xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'>
            <defs><linearGradient id='shard2' x1='0%' y1='0%' x2='100%' y2='100%'><stop offset='0%' stop-color='#f3e8ff'/><stop offset='100%' stop-color='#a855f7'/></linearGradient></defs>
            <path d='M40 5 L60 5 L85 40 L50 95 L15 40 Z' fill='none' stroke='url(#shard2)' stroke-width='4'/>
            <path d='M40 15 L60 15 L75 40 L50 80 L25 40 Z' fill='url(#shard2)' opacity='0.3'/>
        </svg>
        <div>
            <h1 class="text-xl font-bold text-white leading-tight">BRUT</h1>
            <div class="text-[10px] text-purple-400 font-mono tracking-widest">FORCE ENGINE</div>
        </div>
    </div>
    
    <!-- GitHub Link -->
    <a href="#" class="px-3 py-1.5 rounded-full bg-white/5 border border-white/10 text-white hover:bg-white/10 transition flex items-center gap-2">
        <i class="fa-brands fa-github text-sm"></i>
    </a>
</nav>

<!-- App Shell -->
<main class="w-full max-w-lg space-y-4 relative">
    
    <!-- Configuration Screen -->
    <div id="screen-setup" class="glass rounded-3xl p-6 shadow-2xl shadow-purple-900/10">
        <div class="w-16 h-16 bg-purple-500/10 rounded-full flex items-center justify-center mx-auto mb-4 border border-purple-500/20">
            <i class="fa-solid fa-bolt text-2xl text-purple-300"></i>
        </div>
        <div class="text-center mb-6">
            <h2 class="text-2xl font-bold text-white">Vanity Miner</h2>
            <p class="text-xs text-slate-400 mt-2 mx-auto">
                Generate Solana Wallet keys ending in custom text
            </p>
        </div>

        <!-- Input Area -->
        <div class="space-y-4 mb-6">
            <div>
                <label class="text-[10px] uppercase font-bold text-purple-300 tracking-wider ml-1 mb-1 block">Desired Suffix (End)</label>
                <div class="relative">
                    <input id="input-suffix" type="text" placeholder="e.g. BRUT" maxlength="6" 
                        class="w-full bg-black/30 border border-white/10 rounded-xl px-4 py-4 text-lg text-white font-mono focus:border-purple-500 outline-none uppercase text-center tracking-widest placeholder-slate-600 transition-colors">
                    
                    <!-- Mirror Display -->
                    <div class="absolute right-3 top-1/2 -translate-y-1/2 text-slate-500 text-xs font-mono">...<span id="mirror-suffix"></span></div>
                </div>
                
                <!-- Error / Difficulty Message Area -->
                <div class="mt-2 h-5 flex justify-center items-center">
                    <div id="error-msg" class="hidden text-[10px] text-red-400 font-bold bg-red-500/10 px-2 py-0.5 rounded border border-red-500/20">
                        <i class="fa-solid fa-circle-exclamation mr-1"></i> Base58 prohibits '0', 'O', 'I', 'l'
                    </div>
                    <div id="diff-est" class="text-[10px] text-slate-500 font-mono">
                        Enter text to see estimated time
                    </div>
                </div>
            </div>

            <!-- Case Sensitivity Toggle -->
            <div class="glass p-3 rounded-xl flex items-center justify-between cursor-pointer" onclick="toggleCase()">
                <div class="flex flex-col">
                    <span class="text-xs font-bold text-white">Case Sensitive</span>
                    <span class="text-[10px] text-slate-500">Exact match (Much Slower)</span>
                </div>
                <div id="toggle-bg" class="w-10 h-5 bg-slate-700 rounded-full relative transition-colors">
                    <div id="toggle-dot" class="w-3 h-3 bg-white rounded-full absolute top-1 left-1 transition-transform"></div>
                </div>
            </div>
        </div>

        <button onclick="startMining()" class="btn-brand w-full py-4 rounded-xl font-bold text-sm shadow-lg shadow-purple-500/20 mb-4 flex items-center justify-center gap-2 relative overflow-hidden group">
            <span class="relative z-10 flex items-center gap-2"><i class="fa-solid fa-microchip"></i> START BRUTEFORCE</span>
            <div class="absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300"></div>
        </button>

        <p class="text-[10px] text-center text-slate-600">
            Client-side generation. Keys never touch the internet.
        </p>
    </div>

    <!-- Success / Wallet Screen -->
    <div id="screen-wallet" class="hidden space-y-4 fade-in">
        
        <div class="text-center py-2">
            <div class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-green-500/10 border border-green-500/20 text-green-400 text-xs font-bold uppercase">
                <i class="fa-solid fa-check"></i> Found Match
            </div>
        </div>

        <!-- Address Bar -->
        <div class="glass p-4 rounded-2xl flex flex-col gap-2">
            <div class="flex justify-between items-center">
                <div class="text-[10px] text-slate-500 font-bold uppercase">Public Address</div>
                <button id="btn-copy-pub" onclick="copyPub()" class="text-[10px] bg-white/5 hover:bg-white/10 text-white px-2 py-1 rounded transition">COPY</button>
            </div>
            
            <div id="pubkey-display" class="font-mono text-sm text-slate-300 break-all bg-black/20 p-3 rounded-lg border border-white/5">
                ...
            </div>
            <textarea id="hidden-pub" style="position:fixed; left:-9999px; top:0;"></textarea>
        </div>

        <!-- Private Key Card -->
        <div class="bg-red-500/5 border border-red-500/20 rounded-2xl p-4 relative overflow-hidden">
            <div class="flex justify-between items-center mb-3">
                <div class="flex flex-col">
                    <span class="text-[10px] font-bold text-red-400 uppercase tracking-widest"><i class="fa-solid fa-key mr-1"></i> Private Key</span>
                </div>
                <button id="btn-copy-secret" onclick="copySecret()" class="text-[10px] bg-red-500/10 text-red-300 px-3 py-1.5 rounded hover:bg-red-500/20 transition font-bold border border-red-500/20">COPY SECRET</button>
            </div>
            
            <textarea id="hidden-secret" style="position:fixed; left:-9999px; top:0;"></textarea>
            
            <div onclick="toggleSecret()" id="secret-display" class="selectable blur-md code-font text-[10px] text-red-200/90 break-all cursor-pointer transition-all duration-300 hover:bg-red-500/5 p-3 rounded border border-white/5"></div>
            <div class="mt-2 text-[9px] text-red-500/50 font-bold uppercase text-center">Tap to reveal • Safe to import</div>
        </div>

        <button onclick="location.reload()" class="w-full py-4 glass rounded-xl text-xs font-bold text-white hover:bg-white/5 transition uppercase tracking-wider">
            Generate Another
        </button>
    </div>
</main>

<!-- Miner Overlay -->
<div id="miner-ui" class="fixed inset-0 bg-[#05020a]/95 z-50 hidden flex flex-col justify-center items-center p-8 text-center backdrop-blur-sm">
    <!-- Status Icon -->
    <div class="relative mb-8">
        <div class="spinner w-20 h-20"></div>
        <div class="absolute inset-0 flex items-center justify-center text-purple-400 text-2xl animate-pulse">
            <i class="fa-solid fa-crosshairs"></i>
        </div>
    </div>

    <!-- Status Text -->
    <h2 class="text-2xl font-bold text-white mb-2">Generating Keys</h2>
    <p class="text-sm text-slate-400 mb-8">
        Targeting: <span id="mining-target" class="text-purple-400 font-mono font-bold text-lg mx-1">...</span>
    </p>
    
    <!-- Stats -->
    <div class="grid grid-cols-2 gap-4 w-full max-w-xs mb-8">
        <div class="glass p-3 rounded-lg">
            <div class="text-[10px] text-slate-500 uppercase font-bold mb-1">Checked</div>
            <div class="text-lg text-white font-mono leading-none" id="checked-count">0</div>
        </div>
        <div class="glass p-3 rounded-lg">
            <div class="text-[10px] text-slate-500 uppercase font-bold mb-1">Speed</div>
            <div class="text-lg text-purple-300 font-mono leading-none"><span id="speed-count">0</span>/s</div>
        </div>
    </div>

    <button onclick="cancelMining()" class="px-8 py-3 rounded-full border border-red-500/30 text-red-400 text-xs font-bold uppercase hover:bg-red-500/10 transition">
        Stop Process
    </button>
</div>

<!-- LOGIC -->
<script type="module">
    import bs58 from 'https://esm.sh/bs58@5.0.0';
    
    // Config
    let isCaseSensitive = false;
    let isMining = false;
    let animationFrameId;
    let startTime;
    let checked = 0;
    let errorTimeout;

    // --- 1. UI Handling ---
    const inputEl = document.getElementById('input-suffix');
    const mirrorEl = document.getElementById('mirror-suffix');
    const diffEl = document.getElementById('diff-est');
    const errorEl = document.getElementById('error-msg');

    // Case Toggle Logic
    window.toggleCase = () => {
        isCaseSensitive = !isCaseSensitive;
        const bg = document.getElementById('toggle-bg');
        const dot = document.getElementById('toggle-dot');
        
        if (isCaseSensitive) {
            bg.classList.remove('bg-slate-700');
            bg.classList.add('bg-purple-500');
            dot.classList.add('translate-x-5');
        } else {
            bg.classList.add('bg-slate-700');
            bg.classList.remove('bg-purple-500');
            dot.classList.remove('translate-x-5');
        }
        calculateDifficulty(); // Recalc on toggle
    };

    // Input Logic with Warning
    inputEl.addEventListener('input', (e) => {
        const val = e.target.value;
        const forbidden = /[0OIl]/;

        // Check if forbidden char exists
        if(forbidden.test(val)) {
            showError();
            inputEl.classList.add('shake');
            setTimeout(() => inputEl.classList.remove('shake'), 400);
        }

        // Clean value
        e.target.value = val.replace(/[0OIl]/g, ''); // Remove them
        mirrorEl.innerText = e.target.value.toUpperCase();
        calculateDifficulty();
    });

    function showError() {
        // Toggle visibility between Diff and Error
        diffEl.classList.add('hidden');
        errorEl.classList.remove('hidden');
        
        clearTimeout(errorTimeout);
        errorTimeout = setTimeout(() => {
            errorEl.classList.add('hidden');
            diffEl.classList.remove('hidden');
        }, 3000);
    }

    function calculateDifficulty() {
        const val = inputEl.value;
        if (!val) {
            diffEl.innerText = "Enter text to see estimated time";
            return;
        }

        const len = val.length;
        const pool = isCaseSensitive ? 58 : 32; 
        const combinations = Math.pow(pool, len);
        
        // Rough estimate based on 10k keys/sec
        const speed = 8000; 
        const seconds = combinations / speed;

        let timeStr = "";
        if (seconds < 1) timeStr = "Instant";
        else if (seconds < 60) timeStr = `~${Math.ceil(seconds)}s`;
        else if (seconds < 3600) timeStr = `~${Math.ceil(seconds/60)}m`;
        else if (seconds < 86400) timeStr = `~${(seconds/3600).toFixed(1)}h`;
        else timeStr = `~${(seconds/86400).toFixed(1)}d`;

        diffEl.innerHTML = `Difficulty: <span class="text-white font-bold">1 in ${combinations.toLocaleString()}</span> • Est: <span class="text-purple-300 font-bold">${timeStr}</span>`;
    }

    // --- 2. Mining Logic ---
    window.startMining = () => {
        const target = inputEl.value.trim();
        if(!target) return inputEl.focus();

        isMining = true;
        checked = 0;
        startTime = Date.now();
        
        // Setup Overlay
        document.getElementById('miner-ui').classList.remove('hidden');
        document.getElementById('miner-ui').classList.add('flex');
        document.getElementById('mining-target').innerText = target.toUpperCase();
        
        // Logic variables
        const batchSize = 300; 
        const searchStr = isCaseSensitive ? target : target.toLowerCase();
        
        function mine() {
            if(!isMining) return;
            
            // Loop batch
            for(let i=0; i<batchSize; i++) {
                const kp = solanaWeb3.Keypair.generate();
                const addr = kp.publicKey.toString();
                
                let match = false;
                if(isCaseSensitive) {
                    match = addr.endsWith(searchStr);
                } else {
                    match = addr.toLowerCase().endsWith(searchStr);
                }

                if(match) {
                    successMining(kp, addr);
                    return;
                }
            }
            
            checked += batchSize;
            
            // Update UI
            if(checked % 1500 === 0) {
                const elapsed = (Date.now() - startTime) / 1000;
                document.getElementById('checked-count').innerText = checked.toLocaleString();
                document.getElementById('speed-count').innerText = Math.floor(checked / elapsed).toLocaleString();
            }

            // Yield to UI thread
            animationFrameId = requestAnimationFrame(mine);
        }
        
        mine();
    };

    function successMining(kp, pubkey) {
        isMining = false;
        cancelAnimationFrame(animationFrameId);
        
        // Hide Miner UI
        document.getElementById('miner-ui').classList.add('hidden');
        document.getElementById('miner-ui').classList.remove('flex');
        
        // Show Result
        document.getElementById('screen-setup').classList.add('hidden');
        document.getElementById('screen-wallet').classList.remove('hidden');

        // Populate Data
        const secret = bs58.encode(kp.secretKey);
        document.getElementById('hidden-secret').value = secret;
        document.getElementById('hidden-pub').value = pubkey;
        document.getElementById('secret-display').innerText = secret;

        // Highlight Suffix
        const suffixLen = inputEl.value.length;
        const mainPart = pubkey.slice(0, -suffixLen);
        const suffixPart = pubkey.slice(-suffixLen);
        document.getElementById('pubkey-display').innerHTML = 
            `${mainPart}<span class="text-purple-400 font-bold">${suffixPart}</span>`;
    }

    window.cancelMining = () => {
        isMining = false;
        cancelAnimationFrame(animationFrameId);
        document.getElementById('miner-ui').classList.add('hidden');
        document.getElementById('miner-ui').classList.remove('flex');
    };

    // --- 3. Utilities ---
    window.copySecret = () => smartCopy(document.getElementById('hidden-secret').value, 'btn-copy-secret');
    window.copyPub = () => smartCopy(document.getElementById('hidden-pub').value, 'btn-copy-pub');
    window.toggleSecret = () => {
        const el = document.getElementById('secret-display');
        el.classList.toggle('blur-md');
    };

    function smartCopy(text, btnId) {
        navigator.clipboard.writeText(text).then(() => {
            const btn = document.getElementById(btnId);
            const originalText = btn.innerText;
            btn.innerText = "COPIED!";
            btn.classList.add('text-green-400', 'bg-green-500/20');
            setTimeout(() => {
                btn.innerText = originalText;
                btn.classList.remove('text-green-400', 'bg-green-500/20');
            }, 2000);
        }).catch(err => alert("Copy failed, please select manually"));
    }

</script>
</body>
</html>
