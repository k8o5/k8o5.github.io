<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>k8o5</title>
</head>
<body>
    <h1>k8o5</h1>
    <ul id="fileList"></ul>
    <script>
        async function fetchRepoContents(owner, repo, path = '') {
            const url = `https://api.github.com/repos/${owner}/${repo}/contents/${path}`;
            const response = await fetch(url);
            const data = await response.json();
            return data;
        }

        async function listHtmlFiles() {
            const hostname = window.location.hostname;
            if (!hostname.endsWith('.github.io')) {
                console.error('This script is designed for GitHub Pages.');
                return;
            }

            const owner = hostname.split('.')[0];
            let repo;
            const pathname = window.location.pathname.replace(/^\/|\/$/g, '');
            if (pathname === '') {
                repo = `${owner}.github.io`;
            } else {
                repo = pathname.split('/')[0];
            }

            const ul = document.getElementById('fileList');
            const files = await fetchRepoContents(owner, repo);
            files.forEach(item => {
                if (item.type === 'file' && item.name.endsWith('.html') && item.name !== 'index.html') {
                    const li = document.createElement('li');
                    const a = document.createElement('a');
                    a.href = item.name;
                    a.textContent = item.name;
                    li.appendChild(a);
                    ul.appendChild(li);
                }
            });
        }

        listHtmlFiles();
    </script>
</body>
</html>
